
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>DocIntel Network</title>
  <script src="https://unpkg.com/cytoscape@3.30.2/dist/cytoscape.min.js"></script>
  <style> body { font-family: sans-serif; margin: 0; padding: 0; } #cy { width: 100vw; height: 100vh; } </style>
</head>
<body>
<div id="cy"></div>
<script>
  async function load(ind) {
    const res = await fetch(`/network/${encodeURIComponent(ind)}`);
    const data = await res.json();
    const elements = [];
    (data.nodes || []).forEach(n => {
      const id = n.id || n.element_id || (n.labels?.join(':')+':'+(n.value||n.url||n.name));
      elements.push({ data: { id: id, label: (n.value||n.url||n.name||n.labels?.join(',')) } });
    });
    (data.edges || []).forEach(e => {
      elements.push({ data: { id: e.id, source: e.start, target: e.end, label: e.type } });
    });
    const cy = cytoscape({ container: document.getElementById('cy'), elements, layout: { name: 'cose' }, style: [
      { selector: 'node', style: { 'label': 'data(label)', 'font-size': 10, 'text-valign': 'center', 'background-color': '#4c8bf5', 'color': '#fff' } },
      { selector: 'edge', style: { 'label': 'data(label)', 'font-size': 8, 'curve-style': 'bezier', 'target-arrow-shape': 'triangle' } }
    ]});
  }
  load('example.com');
</script>
</body>
</html>
